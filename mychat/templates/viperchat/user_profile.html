{% extends 'viperchat/base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<h2>Profile</h2>
{% if messages %}
    {% for message in messages %}
        <span style="color : green"> <b>{{ message }}</b></span><br>
    {% endfor %}
{% endif %}
{% if request.user == user %}
<a href="{% url 'edit_profile' user.username %}">Edit profile</a><br>
<a href="{% url 'notification_list' user.username %}">Notifications</a><br>
<a href="{% url 'friend_request_list' user.username %}">Friend requests</a><br>
{% else %}
{% if friend_request.exists %}
    {% for request in friend_request %}
    {% if request.status == 'waiting' %}
        <a href="">Cancel friend request</a><br>
    {% endif %}
    {% endfor %}
{% elif request.user in user.friends.all %}
    <a href="">Already friends</a><br>
{% elif friend_request_mirror.exists %}
    {% for request in friend_request_mirror%}
    <a href="{% url 'friend_request_detail' request.pk %}">User sent you invitation</a><br>
    {% endfor %}
{% else %}
    <a href="{% url 'friend_notification' user.username %}">Add friend</a><br>
{% endif %}
{% endif %}
Username: {{ user.username }} <br>
Email: {{ user.email }}<br>
First name: {{ user.first_name }}<br>
Surname: {{ user.last_name }}<br>
Friends: <br>{% for friend in user.friends.all %}
            <a href="{% url 'user_detail' friend.username %}">{{ friend.username }} |  <a href="{% url 'delete_friend' friend.username%}">Delete friend</a></a><br>
        {% endfor %}


{% endblock %}